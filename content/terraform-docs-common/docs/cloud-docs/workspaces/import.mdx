---
page_title: Import existing resources to state
description: Learn how to review search results from queries on existing infrastructure resources so that you can import them to your Terraform state
tfc_only: true
---

# Import existing resources to state

@include 'beta.mdx'

You can run queries defined in HCL against your existing infrastructure to search for resources that are not yet managed by Terraform. HCP Terraform presents query results so that you can import the resources to state and begin managing them as code. 

## Overview

Complete the following steps to import resources into your Terraform state:

1. **Define queries**: Add `list` blocks to your Terraform configuration and copy them to your workspace in HCP Terraform. Refer to [Import resources in bulk](/terraform/language/v1.14.x/import/bulk) for more information.
1. **Run the queries**: You can run queries in the HCP Terraform UI or by running the Terraform CLI on a remote workstation.
1. **Generate code**: HCP Terraform generates `import` and `resource` blocks for the resources it discovers.
1. **Apply the configuration**: Copy the generated code to your Terraform configuration and run it to finish importing the resources.

After importing the resources to state, you can delete the generated import blocks or archive them as a historical record. 

## Define queries

Configure search queries you want to run against your existing infrastructure and copy them to your HCP Terraform workspace. Refer to [Import resources in bulk](/terraform/language/v1.14.x/import/bulk) for instructions on how to define queries. 

If HCP Terraform is connected to your VCS, you check the configurations into your repository so that Terraform can access them. Refer to [Connect to VCS](/terraform/cloud-docs/vcs) for more information.

You can also connect your remote workstation to HCP Terraform and copy the configurations to your workspace using the Terraform CLI. Refer to [Connect to HCP Terraform](/terraform/cli/cloud/settings) for instructions.

## Run queries

Complete the following steps after defining queries and copying them to your HCP Terraform workspace:
 
1. [Log into HCP Terraform](https://app.terraform.io) and navigtate to your workspace.
1. Click **Search & Import** in the sidebar menu. The page shows previously completed queries, as well as any queries that are in progress. 
1. Click **New Query** to start a query. 

As the query progresses, HCP Terraform loads the results to the page.  You can perform the following actions in the results area: 

  - Use the search bar and filters to sort the results.
  - HCP Terraform indicates the management status of resources returned by the query in the **IaC** column to indicate its status.  Providers may change the definition of a resource identity, but HCP Terraform attempts to store all resource identities captured through provider upgrades. HCP Terraform may list a resource as **Unknown** instead of **Unmanaged** when a resource is applied by one version of a provider but queried by a different version and the identity schema for that resource type changed between versions.
      - **Managed** indicates that the resource has the same [identity](/terraform/language/import#resource-identity) as a resource applied by a similar provider version.
      - **Unknown** indicates that Terraform found a resource under management with the same [identity](/terraform/language/import#resource-identity) applied by a similar provider version. 
      - **Unmanaged** indicates that there are no managed resources of this type or that Terraform can't attribute this resource to a similar provider and Terraform version. 
  - Click on a resource in the **Resource type** column to view details made available by the provider.
  - Select resources that you want to import to your workspace. Refer to [Generate code](#generate-code) for instructions.

## Generate code

Select one or more resource instances in the search results area and click **Generate configuration**. HCP Terraform generates `import` and `resource` blocks that you can add to your configuration to import the resource instances into your state.

## Import resources

Copy the code to your Terraform configuration and use one of the following methods to apply the configuration. Before applying the configuration, we recommend running the [`terraform fmt` command](/terraform/cli/commands/fmt) to ensure that the code is properly formatted:
  
1. Navigate to your workspace in HCP Terraform and click **New run**.
1. Run the `terraform apply` command on the remote workstation.
1. If your workspace is configured to run on VCS changes, check the updated configuration into your VCS to trigger a new run. 

## Next steps

After importing your resources, you can remove the generated import blocks from your configuration, but we recommend archiving it as a historical record.
